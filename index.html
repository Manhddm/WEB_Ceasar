<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thu·∫≠t to√°n Caesar Cipher - An to√†n b·∫£o m·∫≠t th√¥ng tin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
            padding: 40px 20px;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            color: #ffffff;
        }

        .sub-heading {
            font-size: 1.1em;
            opacity: 0.95;
            margin-bottom: 10px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            color: #f8f9fa;
        }

        .instruction {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-style: italic;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }

        #inputs {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            align-items: end;
            margin-bottom: 30px;
        }

        .group {
            text-align: center;
        }

        .group h3 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 1.2em;
            font-weight: 600;
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            text-align: center;
            transition: all 0.3s ease;
            background: #ffffff;
            color: #495057;
        }

        input[type="text"]:read-only {
            background: #f8f9fa;
            color: #6c757d;
            border-color: #dee2e6;
        }

        input[type="text"]:focus, input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        input[type="number"] {
            max-width: 100px;
        }

        .section {
            background: white;
            margin: 20px 0;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .section h2 {
            color: #495057;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-align: center;
            font-weight: 700;
        }

        /* H·ªá th·ªëng m√£ h√≥a tr·ª±c quan */
        #encryption {
            text-align: center;
        }

        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(26, 1fr);
            gap: 5px;
            margin: 20px 0;
            max-width: 100%;
            overflow-x: auto;
        }

        .char {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 8px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 14px;
            min-width: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .char.plain {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
            color: #2d5016;
        }

        .char.cypher {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa8a8 100%);
            color: #8b0000;
        }

        .char.highlight {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.4);
            color: white;
        }

        .mapping-arrows {
            display: grid;
            grid-template-columns: repeat(26, 1fr);
            gap: 5px;
            margin: 10px 0;
            text-align: center;
        }

        .arrow {
            font-size: 20px;
            color: #667eea;
            padding: 5px;
            font-weight: bold;
        }

        /* Bi·ªÉu ƒë·ªì t·∫ßn su·∫•t */
        .freq-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .chart-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #dee2e6;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .chart-container h3 {
            color: #495057;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 600;
        }

        .chart {
            display: flex;
            align-items: end;
            height: 200px;
            gap: 2px;
            margin-bottom: 10px;
        }

        .bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        .bar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 100%;
            min-height: 2px;
            border-radius: 4px 4px 0 0;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
        }

        .bar:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.4);
        }

        .chart-labels {
            display: grid;
            grid-template-columns: repeat(26, 1fr);
            gap: 2px;
            text-align: center;
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
            font-weight: 500;
        }

        /* Ph·∫ßn gi·∫£i th√≠ch */
        .explanation {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #2196f3;
            color: #1565c0;
        }

        .formula {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border: 2px solid #ffc107;
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 20px 0;
            font-size: 1.1em;
            color: #e65100;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2);
        }

        .security-notes {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border: 2px solid #f44336;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.2);
        }

        .security-notes h3 {
            color: #c62828;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .security-notes ul {
            color: #d32f2f;
            padding-left: 20px;
        }

        .security-notes li {
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            #inputs {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .freq-section {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .alphabet-grid {
                grid-template-columns: repeat(13, 1fr);
            }
            
            .mapping-arrows {
                grid-template-columns: repeat(13, 1fr);
            }
        }

        .highlight-box {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            border-left: 5px solid #4caf50;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            color: #2e7d32;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê Thu·∫≠t to√°n Caesar Cipher</h1>
            <p class="sub-heading">M·∫≠t m√£ thay th·∫ø ƒë∆°n b·∫£ng ch·ªØ c√°i ƒë∆°n gi·∫£n ƒë∆∞·ª£c Julius Caesar s·ª≠ d·ª•ng cho c√°c th√¥ng ƒëi·ªáp t·ªõi c√°c ch·ªâ huy qu√¢n s·ª± c·ªßa √¥ng, c√°ch ƒë√¢y h∆°n 2000 nƒÉm.</p>
            <p class="sub-heading">N√≥ d·ªãch chuy·ªÉn ho·∫∑c 'xoay' b·∫£ng ch·ªØ c√°i, v√† ƒë√¥i khi ƒë∆∞·ª£c g·ªçi l√† M·∫≠t m√£ Xoay (v√≠ d·ª•: ROT-13 cho d·ªãch chuy·ªÉn 13). N√≥ r·∫•t d·ªÖ b·ªã t·∫•n c√¥ng b·∫±ng ph√¢n t√≠ch t·∫ßn su·∫•t ch·ªØ c√°i v√† do ƒë√≥ d·ªÖ b·ªã ph√° v·ª°.</p>
            
            <section id="inputs">
                <div class="group" style="grid-column: 1 / -1; margin-bottom: 20px;">
                    <h3>Ch·∫ø ƒë·ªô ho·∫°t ƒë·ªông</h3>
                    <div style="display: flex; gap: 30px; justify-content: center; align-items: center;">
                        <label style="display: flex; align-items: center; gap: 8px; font-size: 16px; cursor: pointer;">
                            <input type="radio" name="mode" value="encrypt" checked style="transform: scale(1.2);">
                            <span>üîê M√£ h√≥a</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; font-size: 16px; cursor: pointer;">
                            <input type="radio" name="mode" value="decrypt" style="transform: scale(1.2);">
                            <span>üîç Th√°m m√£</span>
                        </label>
                    </div>
                </div>

                <div class="group">
                    <h3 id="input-label">VƒÉn b·∫£n g·ªëc</h3>
                    <input type="text" id="plaintext-input" placeholder="Nh·∫≠p vƒÉn b·∫£n c·∫ßn m√£ h√≥a..." value="HELLO WORLD">
                </div>
                
                <div class="group">
                    <h3>Kh√≥a (D·ªãch chuy·ªÉn)</h3>
                    <input type="number" id="key-input" min="0" max="25" value="3">
                </div>
                
                <div class="group">
                    <h3 id="output-label">VƒÉn b·∫£n m√£ h√≥a</h3>
                    <input type="text" id="ciphertext-input" placeholder="K·∫øt qu·∫£ m√£ h√≥a..." value="KHOOR ZRUOG">
                </div>
                
                <div class="group" id="backtrack-results" style="display:none; grid-column: 1 / -1;">
                    <h3>K·∫øt qu·∫£ gi·∫£i m√£ v·ªõi t·∫•t c·∫£ c√°c kh√≥a (Backtrack)</h3>
                    <div id="backtrack-list" style="max-height: 250px; overflow-y: auto; background: #f8f9fa; border-radius: 10px; padding: 10px; border: 1px solid #e9ecef;"></div>
                </div>
            </section>
            
            <p class="instruction" id="instruction-text">H∆∞·ªõng d·∫´n: Ch·ªçn ch·∫ø ƒë·ªô M√£ h√≥a, nh·∫≠p vƒÉn b·∫£n g·ªëc v√† kh√≥a ƒë·ªÉ xem k·∫øt qu·∫£ m√£ h√≥a. Ho·∫∑c ch·ªçn ch·∫ø ƒë·ªô Th√°m m√£, nh·∫≠p vƒÉn b·∫£n m√£ h√≥a v√† kh√≥a ƒë·ªÉ gi·∫£i m√£.</p>
        </header>

        <main>
            <section id="encryption" class="section">
                <h2>H·ªá th·ªëng m√£ h√≥a</h2>
                
                <div class="group">
                    <h3>Ch·ªØ c√°i g·ªëc</h3>
                    <div id="plaintext-chars" class="alphabet-grid">
                        <div class="char plain">A</div><div class="char plain">B</div><div class="char plain">C</div><div class="char plain">D</div><div class="char plain">E</div><div class="char plain">F</div><div class="char plain">G</div><div class="char plain">H</div><div class="char plain">I</div><div class="char plain">J</div><div class="char plain">K</div><div class="char plain">L</div><div class="char plain">M</div><div class="char plain">N</div><div class="char plain">O</div><div class="char plain">P</div><div class="char plain">Q</div><div class="char plain">R</div><div class="char plain">S</div><div class="char plain">T</div><div class="char plain">U</div><div class="char plain">V</div><div class="char plain">W</div><div class="char plain">X</div><div class="char plain">Y</div><div class="char plain">Z</div>
                    </div>
                </div>

                <div class="mapping-arrows" id="mapping-arrows">
                    <div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div><div class="arrow">‚Üì</div>
                </div>

                <div class="group">
                    <h3>Ch·ªØ c√°i m√£ h√≥a</h3>
                    <div id="ciphertext-chars" class="alphabet-grid">
                        <div class="char cypher">D</div><div class="char cypher">E</div><div class="char cypher">F</div><div class="char cypher">G</div><div class="char cypher">H</div><div class="char cypher">I</div><div class="char cypher">J</div><div class="char cypher">K</div><div class="char cypher">L</div><div class="char cypher">M</div><div class="char cypher">N</div><div class="char cypher">O</div><div class="char cypher">P</div><div class="char cypher">Q</div><div class="char cypher">R</div><div class="char cypher">S</div><div class="char cypher">T</div><div class="char cypher">U</div><div class="char cypher">V</div><div class="char cypher">W</div><div class="char cypher">X</div><div class="char cypher">Y</div><div class="char cypher">Z</div><div class="char cypher">A</div><div class="char cypher">B</div><div class="char cypher">C</div>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>Ph√¢n t√≠ch t·∫ßn su·∫•t</h2>
                <div class="freq-section">
                    <div class="chart-container">
                        <h3>T·∫ßn su·∫•t ch·ªØ c√°i vƒÉn b·∫£n g·ªëc</h3>
                        <div id="plaintext-chart" class="chart"></div>
                        <div class="chart-labels">
                            <div>A</div><div>B</div><div>C</div><div>D</div><div>E</div><div>F</div><div>G</div><div>H</div><div>I</div><div>J</div><div>K</div><div>L</div><div>M</div><div>N</div><div>O</div><div>P</div><div>Q</div><div>R</div><div>S</div><div>T</div><div>U</div><div>V</div><div>W</div><div>X</div><div>Y</div><div>Z</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3>T·∫ßn su·∫•t ch·ªØ c√°i vƒÉn b·∫£n m√£ h√≥a</h3>
                        <div id="ciphertext-chart" class="chart"></div>
                        <div class="chart-labels">
                            <div>A</div><div>B</div><div>C</div><div>D</div><div>E</div><div>F</div><div>G</div><div>H</div><div>I</div><div>J</div><div>K</div><div>L</div><div>M</div><div>N</div><div>O</div><div>P</div><div>Q</div><div>R</div><div>S</div><div>T</div><div>U</div><div>V</div><div>W</div><div>X</div><div>Y</div><div>Z</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>L√Ω thuy·∫øt v√† C√¥ng th·ª©c</h2>
                
                <div class="explanation">
                    <p><strong>Caesar Cipher</strong> l√† m·ªôt trong nh·ªØng thu·∫≠t to√°n m√£ h√≥a ƒë∆°n gi·∫£n v√† c·ªï ƒëi·ªÉn nh·∫•t. ƒê√¢y l√† m·ªôt d·∫°ng m√£ h√≥a thay th·∫ø trong ƒë√≥ m·ªói ch·ªØ c√°i trong b·∫£n r√µ ƒë∆∞·ª£c thay th·∫ø b·∫±ng m·ªôt ch·ªØ c√°i kh√°c c√°ch n√≥ m·ªôt kho·∫£ng c·ªë ƒë·ªãnh trong b·∫£ng ch·ªØ c√°i.</p>
                </div>

                <div class="formula">
                    <strong>C√¥ng th·ª©c m√£ h√≥a:</strong> E(x) = (x + k) mod 26<br>
                    <strong>C√¥ng th·ª©c gi·∫£i m√£:</strong> D(x) = (x - k) mod 26<br>
                    <em>Trong ƒë√≥: x l√† v·ªã tr√≠ ch·ªØ c√°i (A=0, B=1, ..., Z=25), k l√† kh√≥a d·ªãch chuy·ªÉn</em>
                </div>

                <div class="highlight-box">
                    <strong>V√≠ d·ª•:</strong> V·ªõi kh√≥a k=3, ch·ªØ c√°i 'A' s·∫Ω ƒë∆∞·ª£c m√£ h√≥a th√†nh 'D', 'B' th√†nh 'E', 'HELLO' th√†nh 'KHOOR'.
                </div>
            </section>

            <section class="section">
                <div class="security-notes">
                    <h3>‚ö†Ô∏è ƒêi·ªÉm y·∫øu v√† b·∫£o m·∫≠t</h3>
                    <ul>
                        <li><strong>D·ªÖ b·ªã ph√° v·ª°:</strong> Ch·ªâ c√≥ 25 kh√≥a c√≥ th·ªÉ, d·ªÖ d√†ng th·ª≠ h·∫øt b·∫±ng brute force</li>
                        <li><strong>Ph√¢n t√≠ch t·∫ßn su·∫•t:</strong> T·∫ßn su·∫•t xu·∫•t hi·ªán c·ªßa c√°c ch·ªØ c√°i v·∫´n ƒë∆∞·ª£c gi·ªØ nguy√™n</li>
                        <li><strong>Kh√¥ng ph√π h·ª£p th·ª±c t·∫ø:</strong> Ch·ªâ d√πng cho m·ª•c ƒë√≠ch gi√°o d·ª•c v√† hi·ªÉu bi·∫øt l·ªãch s·ª≠ m·∫≠t m√£</li>
                        <li><strong>C·∫£i ti·∫øn:</strong> C√≥ th·ªÉ k·∫øt h·ª£p v·ªõi c√°c thu·∫≠t to√°n kh√°c ƒë·ªÉ tƒÉng ƒë·ªô b·∫£o m·∫≠t</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

        <script>
            // H√†m Caesar Cipher
            function caesarCipher(text, shift, decrypt = false) {
                if (decrypt) shift = -shift;
                return text.toUpperCase().replace(/[A-Z]/g, function(char) {
                    const code = char.charCodeAt(0) - 65;
                    const shifted = (code + shift + 26) % 26;
                    return String.fromCharCode(shifted + 65);
                });
            }

            // Backtrack gi·∫£i m√£ t·∫•t c·∫£ c√°c kh√≥a
            function backtrackDecode(ciphertext) {
                const results = [];
                for (let k = 0; k < 26; k++) {
                    const plain = caesarCipher(ciphertext, k, true);
                    results.push({ key: k, text: plain });
                }
                return results;
            }

            // Hi·ªÉn th·ªã k·∫øt qu·∫£ backtrack
            function showBacktrackResults(ciphertext) {
                const container = document.getElementById('backtrack-results');
                const list = document.getElementById('backtrack-list');
                if (!ciphertext.trim()) {
                    container.style.display = 'none';
                    list.innerHTML = '';
                    return;
                }
                const results = backtrackDecode(ciphertext);
                let html = '';
                results.forEach(r => {
                    html += `<div style="padding:4px 0;"><strong>Kh√≥a ${r.key}:</strong> <span style="font-family:monospace;">${r.text}</span></div>`;
                });
                list.innerHTML = html;
                container.style.display = 'block';
            }

            // C·∫≠p nh·∫≠t b·∫£ng ch·ªØ c√°i m√£ h√≥a
            function updateCipherAlphabet(shift) {
                const cipherChars = document.querySelectorAll('#ciphertext-chars .char');
                const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                cipherChars.forEach((char, index) => {
                    const newIndex = (index + shift) % 26;
                    char.textContent = alphabet[newIndex];
                });
            }

            // T√≠nh to√°n t·∫ßn su·∫•t ch·ªØ c√°i
            function calculateFrequency(text) {
                const freq = new Array(26).fill(0);
                const cleanText = text.toUpperCase().replace(/[^A-Z]/g, '');
                for (let char of cleanText) {
                    freq[char.charCodeAt(0) - 65]++;
                }
                return freq;
            }

            // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì t·∫ßn su·∫•t
            function updateChart(chartId, frequencies) {
                const chart = document.getElementById(chartId);
                chart.innerHTML = '';
                const maxFreq = Math.max(...frequencies, 1);
                frequencies.forEach(freq => {
                    const barContainer = document.createElement('div');
                    barContainer.className = 'bar-container';
                    const bar = document.createElement('div');
                    bar.className = 'bar';
                    bar.style.height = `${(freq / maxFreq) * 150}px`;
                    bar.title = `T·∫ßn su·∫•t: ${freq}`;
                    barContainer.appendChild(bar);
                    chart.appendChild(barContainer);
                });
            }

            // Highlight ch·ªØ c√°i ƒë∆∞·ª£c s·ª≠ d·ª•ng
            function highlightUsedLetters(text, isPlaintext = true) {
                const chars = document.querySelectorAll(isPlaintext ? '#plaintext-chars .char' : '#ciphertext-chars .char');
                const usedLetters = new Set(text.toUpperCase().replace(/[^A-Z]/g, ''));
                chars.forEach((char, index) => {
                    const letter = String.fromCharCode(65 + index);
                    if (usedLetters.has(letter)) {
                        char.classList.add('highlight');
                    } else {
                        char.classList.remove('highlight');
                    }
                });
            }

            // C·∫≠p nh·∫≠t nh√£n giao di·ªán theo ch·∫ø ƒë·ªô
            function updateLabels(mode) {
                const inputLabel = document.getElementById('input-label');
                const outputLabel = document.getElementById('output-label');
                const plaintextInput = document.getElementById('plaintext-input');
                const ciphertextInput = document.getElementById('ciphertext-input');
                const instructionText = document.getElementById('instruction-text');
                const backtrackResults = document.getElementById('backtrack-results');
                if (mode === 'encrypt') {
                    inputLabel.textContent = 'VƒÉn b·∫£n g·ªëc';
                    outputLabel.textContent = 'VƒÉn b·∫£n m√£ h√≥a';
                    plaintextInput.placeholder = 'Nh·∫≠p vƒÉn b·∫£n c·∫ßn m√£ h√≥a...';
                    ciphertextInput.placeholder = 'K·∫øt qu·∫£ m√£ h√≥a...';
                    ciphertextInput.readOnly = true;
                    plaintextInput.readOnly = false;
                    instructionText.textContent = 'H∆∞·ªõng d·∫´n: Ch·∫ø ƒë·ªô M√£ h√≥a - Nh·∫≠p vƒÉn b·∫£n g·ªëc v√† ch·ªçn kh√≥a ƒë·ªÉ xem k·∫øt qu·∫£ m√£ h√≥a.';
                    backtrackResults.style.display = 'none';
                } else {
                    inputLabel.textContent = 'VƒÉn b·∫£n m√£ h√≥a';
                    outputLabel.textContent = 'VƒÉn b·∫£n g·ªëc';
                    plaintextInput.placeholder = 'K·∫øt qu·∫£ gi·∫£i m√£...';
                    ciphertextInput.placeholder = 'Nh·∫≠p vƒÉn b·∫£n c·∫ßn gi·∫£i m√£...';
                    ciphertextInput.readOnly = false;
                    plaintextInput.readOnly = true;
                    instructionText.textContent = 'H∆∞·ªõng d·∫´n: Ch·∫ø ƒë·ªô Th√°m m√£ - Nh·∫≠p vƒÉn b·∫£n m√£ h√≥a v√† ch·ªçn kh√≥a ƒë·ªÉ xem k·∫øt qu·∫£ gi·∫£i m√£ ho·∫∑c th·ª≠ t·∫•t c·∫£ c√°c kh√≥a.';
                }
            }

            // C·∫≠p nh·∫≠t to√†n b·ªô giao di·ªán
            function updateDisplay() {
                const mode = document.querySelector('input[name="mode"]:checked').value;
                const key = parseInt(document.getElementById('key-input').value) || 0;
                if (mode === 'encrypt') {
                    const plaintext = document.getElementById('plaintext-input').value;
                    const ciphertext = caesarCipher(plaintext, key);
                    document.getElementById('ciphertext-input').value = ciphertext;
                    // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì t·∫ßn su·∫•t
                    const plainFreq = calculateFrequency(plaintext);
                    const cipherFreq = calculateFrequency(ciphertext);
                    updateChart('plaintext-chart', plainFreq);
                    updateChart('ciphertext-chart', cipherFreq);
                    // Highlight ch·ªØ c√°i ƒë∆∞·ª£c s·ª≠ d·ª•ng
                    highlightUsedLetters(plaintext, true);
                    highlightUsedLetters(ciphertext, false);
                    // ·∫®n k·∫øt qu·∫£ backtrack
                    document.getElementById('backtrack-results').style.display = 'none';
                } else {
                    const ciphertext = document.getElementById('ciphertext-input').value;
                    const plaintext = caesarCipher(ciphertext, key, true);
                    document.getElementById('plaintext-input').value = plaintext;
                    // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì t·∫ßn su·∫•t
                    const cipherFreq = calculateFrequency(ciphertext);
                    const plainFreq = calculateFrequency(plaintext);
                    updateChart('plaintext-chart', plainFreq);
                    updateChart('ciphertext-chart', cipherFreq);
                    // Highlight ch·ªØ c√°i ƒë∆∞·ª£c s·ª≠ d·ª•ng
                    highlightUsedLetters(plaintext, true);
                    highlightUsedLetters(ciphertext, false);
                    // Hi·ªÉn th·ªã k·∫øt qu·∫£ backtrack
                    showBacktrackResults(ciphertext);
                }
                // C·∫≠p nh·∫≠t b·∫£ng ch·ªØ c√°i m√£ h√≥a
                updateCipherAlphabet(key);
            }

            // X·ª≠ l√Ω thay ƒë·ªïi ch·∫ø ƒë·ªô
            function handleModeChange() {
                const mode = document.querySelector('input[name="mode"]:checked').value;
                updateLabels(mode);
                // Reset gi√° tr·ªã input khi chuy·ªÉn ch·∫ø ƒë·ªô
                if (mode === 'encrypt') {
                    document.getElementById('plaintext-input').value = 'HELLO WORLD';
                    document.getElementById('ciphertext-input').value = '';
                } else {
                    document.getElementById('ciphertext-input').value = 'KHOOR ZRUOG';
                    document.getElementById('plaintext-input').value = '';
                }
                updateDisplay();
            }

            // Event listeners
            document.getElementById('plaintext-input').addEventListener('input', updateDisplay);
            document.getElementById('key-input').addEventListener('input', updateDisplay);
            document.getElementById('ciphertext-input').addEventListener('input', updateDisplay);
            // Event listener cho radio buttons
            document.querySelectorAll('input[name="mode"]').forEach(radio => {
                radio.addEventListener('change', handleModeChange);
            });
            // Kh·ªüi t·∫°o
            updateLabels('encrypt');
            updateDisplay();
        </script>
</body>
</html>
